<!DOCTYPE html>
<!-- Bloxx Editor v2.2 - Updated 2026-01-28T12:00 - Detailed Audit -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bloxx Editor</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="editor.css" rel="stylesheet">
</head>
<body>

  <!-- ═══ TOOLBAR ═══ -->
  <header class="editor-toolbar">
    <a class="toolbar-logo" href="/"><i class="bi bi-grid-3x3-gap-fill"></i><span>Bloxx</span></a>
    <div class="toolbar-sep"></div>
    <select id="site-select" class="toolbar-select"><option value="">Loading…</option></select>
    <select id="page-select" class="toolbar-select"><option value="">Loading…</option></select>
    <button class="toolbar-btn" id="btn-new-page" title="New Page"><i class="bi bi-file-earmark-plus"></i></button>
    <div class="toolbar-sep"></div>
    <div class="toolbar-group">
      <button class="toolbar-btn" id="btn-undo" title="Undo ⌘Z" disabled><i class="bi bi-arrow-counterclockwise"></i></button>
      <button class="toolbar-btn" id="btn-redo" title="Redo ⌘⇧Z" disabled><i class="bi bi-arrow-clockwise"></i></button>
    </div>
    <div class="toolbar-sep"></div>
    <div class="toolbar-group" id="viewport-group">
      <button class="toolbar-btn active" data-vp="desktop" title="Desktop"><i class="bi bi-display"></i></button>
      <button class="toolbar-btn" data-vp="tablet" title="Tablet"><i class="bi bi-tablet"></i></button>
      <button class="toolbar-btn" data-vp="mobile" title="Mobile"><i class="bi bi-phone"></i></button>
    </div>
    <div class="toolbar-spacer"></div>
    <div class="collab-avatars" id="collab-avatars"></div>
    <span class="save-indicator" id="save-indicator"><i class="bi bi-check-circle"></i> Saved</span>
    <div class="toolbar-sep"></div>
    <button class="toolbar-btn" id="btn-code-panel" title="Code Editor"><i class="bi bi-code-slash"></i></button>
    <button class="toolbar-btn" id="btn-save" title="Save ⌘S"><i class="bi bi-cloud-upload"></i></button>
    <button class="toolbar-btn" id="btn-schema" title="Update Schema"><i class="bi bi-braces"></i></button>
    <button class="toolbar-btn toolbar-btn-audit" id="btn-audit" title="Audit Page"><i class="bi bi-speedometer2"></i> Audit</button>
    <button class="toolbar-btn toolbar-btn-deploy" id="btn-deploy" title="Deploy"><i class="bi bi-rocket-takeoff"></i></button>
  </header>

  <!-- ═══ MAIN ═══ -->
  <div class="editor-main">

    <!-- LEFT SIDEBAR -->
    <aside class="editor-sidebar" id="sidebar">
      <nav class="sidebar-tabs">
        <button class="sidebar-tab active" data-panel="components"><i class="bi bi-grid-3x3-gap"></i> Components</button>
        <button class="sidebar-tab" data-panel="properties"><i class="bi bi-sliders2"></i> Edit</button>
        <button class="sidebar-tab" data-panel="page"><i class="bi bi-file-earmark-code"></i> Page</button>
        <button class="sidebar-tab" data-panel="settings"><i class="bi bi-gear"></i> Settings</button>
        <button class="sidebar-tab" data-panel="collections"><i class="bi bi-collection"></i> CMS</button>
        <button class="sidebar-tab" data-panel="schema"><i class="bi bi-braces"></i> Schema</button>
      </nav>

      <!-- Components panel -->
      <div class="sidebar-panel active" id="panel-components">
        <div class="panel-header">
          <span>Page Components</span>
          <button class="btn-sm-icon" id="btn-add-component" title="Add from library"><i class="bi bi-plus-lg"></i></button>
        </div>
        <div id="component-list" class="component-list">
          <div class="empty-state"><i class="bi bi-grid-3x3-gap"></i><p>Select a page to see components</p></div>
        </div>
      </div>

      <!-- Edit / Properties panel -->
      <div class="sidebar-panel" id="panel-properties">
        <div class="panel-header"><span>Edit Component</span></div>
        <div id="props-content">
          <div class="empty-state"><i class="bi bi-cursor"></i><p>Click a component in the preview</p></div>
        </div>
      </div>

      <!-- Page settings -->
      <div class="sidebar-panel" id="panel-page">
        <div class="panel-header"><span>Page Settings</span></div>
        <div class="field-group"><label class="field-label">Title</label><input type="text" class="field-input" id="meta-title"></div>
        <div class="field-group"><label class="field-label">Description</label><textarea class="field-input" id="meta-desc" rows="3"></textarea></div>
        <div class="field-group"><label class="field-label">Canonical URL</label><input type="text" class="field-input" id="meta-canonical"></div>
        <div class="field-group"><label class="field-label">OG Image</label><input type="text" class="field-input" id="meta-og-image"></div>
        <button class="btn-action" id="btn-apply-meta"><i class="bi bi-check-lg"></i> Apply</button>

        <div class="panel-header" style="margin-top:20px"><span>Images</span></div>
        <label class="upload-dropzone" id="upload-dropzone">
          <i class="bi bi-cloud-arrow-up"></i><span>Drop or click to upload</span>
          <input type="file" id="file-input" accept="image/*" hidden>
        </label>
        <div class="image-grid" id="image-grid"></div>
      </div>

      <!-- Settings panel -->
      <div class="sidebar-panel" id="panel-settings">
        <div class="panel-header">
          <span>Site Settings</span>
          <button class="btn-sm-icon" id="btn-save-settings" title="Save settings"><i class="bi bi-check-lg"></i></button>
        </div>
        <div class="settings-section">
          <div class="settings-section-header"><i class="bi bi-building"></i> Business Info</div>
          <div class="field-group"><label class="field-label">Business Name</label><input type="text" class="field-input" id="setting-business-name"></div>
          <div class="field-group"><label class="field-label">Phone</label><input type="tel" class="field-input" id="setting-phone"></div>
          <div class="field-group"><label class="field-label">Email</label><input type="email" class="field-input" id="setting-email"></div>
          <div class="field-group"><label class="field-label">Address</label><textarea class="field-input" id="setting-address" rows="2"></textarea></div>
        </div>
        <div class="settings-section">
          <div class="settings-section-header"><i class="bi bi-graph-up"></i> Analytics</div>
          <div class="field-group"><label class="field-label">Google Analytics ID</label><input type="text" class="field-input" id="setting-ga-id" placeholder="G-XXXXXXXXXX"></div>
          <div class="field-group"><label class="field-label">Facebook Pixel ID</label><input type="text" class="field-input" id="setting-fb-pixel" placeholder="1234567890"></div>
          <div class="field-group"><label class="field-label">GTM Container ID</label><input type="text" class="field-input" id="setting-gtm-id" placeholder="GTM-XXXXXXX"></div>
        </div>
        <div class="settings-section">
          <div class="settings-section-header"><i class="bi bi-palette"></i> Branding</div>
          <div class="field-group"><label class="field-label">Primary Color</label><input type="color" class="field-input field-color" id="setting-primary-color" value="#6366f1"></div>
          <div class="field-group"><label class="field-label">Secondary Color</label><input type="color" class="field-input field-color" id="setting-secondary-color" value="#10b981"></div>
          <div class="field-group"><label class="field-label">Heading Font</label><input type="text" class="field-input" id="setting-heading-font" placeholder="Inter, sans-serif"></div>
          <div class="field-group"><label class="field-label">Body Font</label><input type="text" class="field-input" id="setting-body-font" placeholder="Inter, sans-serif"></div>
        </div>
        <div class="settings-section">
          <div class="settings-section-header"><i class="bi bi-search"></i> SEO Defaults</div>
          <div class="field-group"><label class="field-label">Site Title Suffix</label><input type="text" class="field-input" id="setting-title-suffix" placeholder="| My Company"></div>
          <div class="field-group"><label class="field-label">Default OG Image</label><input type="text" class="field-input" id="setting-default-og" placeholder="/images/og-default.jpg"></div>
        </div>
      </div>

      <!-- Collections panel -->
      <div class="sidebar-panel" id="panel-collections">
        <div class="panel-header">
          <span>Collections (CMS)</span>
          <button class="btn-sm-icon" id="btn-add-collection" title="Create collection"><i class="bi bi-plus-lg"></i></button>
        </div>
        <div id="collections-list" class="collections-list">
          <div class="empty-state"><i class="bi bi-collection"></i><p>No collections yet</p></div>
        </div>
      </div>

      <!-- Schema panel -->
      <div class="sidebar-panel" id="panel-schema">
        <div class="panel-header">
          <span>JSON-LD Schema</span>
          <span class="schema-status" id="schema-status"><i class="bi bi-check-circle"></i> Up to date</span>
        </div>
        <div id="schema-cards"></div>
        <div class="field-group" style="margin-top:12px">
          <label class="field-label">Raw JSON-LD <button class="code-toggle-btn" id="schema-toggle-raw"><i class="bi bi-code-slash"></i></button></label>
          <div id="schema-raw-wrap" class="code-wrap collapsed">
            <pre class="field-input field-input-code" id="schema-raw" style="white-space:pre-wrap;font-size:11px;max-height:400px;overflow:auto;background:#1e1e2e;color:#cdd6f4;padding:8px;border-radius:6px;margin:0"></pre>
          </div>
        </div>
      </div>
    </aside>

    <!-- CANVAS -->
    <main class="editor-canvas" id="canvas">
      <div class="canvas-frame viewport-desktop" id="canvas-frame">
        <iframe id="preview-iframe" sandbox="allow-scripts allow-same-origin" title="Preview"></iframe>
      </div>
      <div class="canvas-loading" id="canvas-loading"><div class="spinner"></div><p>Loading…</p></div>
    </main>

    <!-- CODE PANEL -->
    <aside class="editor-code-panel" id="code-panel" hidden>
      <div class="panel-header">
        <span>Code</span>
        <button class="btn-sm-icon" id="code-panel-close"><i class="bi bi-x-lg"></i></button>
      </div>
      <textarea class="code-panel-editor" id="code-panel-editor" spellcheck="false" placeholder="Select a component to view its HTML"></textarea>
      <div class="code-panel-actions">
        <button class="btn-action btn-action-outline" id="code-panel-apply"><i class="bi bi-check-lg"></i> Apply</button>
      </div>
    </aside>
  </div>

  <!-- ═══ COMPONENT LIBRARY MODAL ═══ -->
  <div class="modal-overlay" id="library-modal" hidden>
    <div class="modal-box modal-lg">
      <div class="modal-header">
        <i class="bi bi-grid-3x3-gap"></i>
        <span>Component Library</span>
        <span class="modal-sub">Insert with @short_id</span>
        <button class="modal-close" id="library-close"><i class="bi bi-x-lg"></i></button>
      </div>
      <div class="modal-body">
        <input type="text" class="library-search" id="library-search" placeholder="Search components…">
        <div class="library-cats" id="library-cats">
          <button class="cat-btn active" data-cat="all">All</button>
          <button class="cat-btn" data-cat="hero">Hero</button>
          <button class="cat-btn" data-cat="features">Features</button>
          <button class="cat-btn" data-cat="pricing">Pricing</button>
          <button class="cat-btn" data-cat="cta">CTA</button>
          <button class="cat-btn" data-cat="testimonial">Testimonial</button>
          <button class="cat-btn" data-cat="faq">FAQ</button>
          <button class="cat-btn" data-cat="footer">Footer</button>
        </div>
        <div class="library-grid" id="library-grid"></div>
        <button class="library-create" id="library-create"><i class="bi bi-plus-lg"></i> Create New Component</button>
      </div>
    </div>
  </div>

  <!-- ═══ CREATE COMPONENT MODAL ═══ -->
  <div class="modal-overlay" id="create-modal" hidden>
    <div class="modal-box">
      <div class="modal-header">
        <i class="bi bi-stars"></i><span>Create Component</span>
        <button class="modal-close" id="create-close"><i class="bi bi-x-lg"></i></button>
      </div>
      <div class="modal-body">
        <div class="field-group" style="margin-bottom:10px">
          <label class="field-label">Component Type</label>
          <select id="create-type" class="field-input">
            <option value="Hero">Hero</option>
            <option value="Features">Features</option>
            <option value="Pricing">Pricing</option>
            <option value="CTA">CTA</option>
            <option value="Testimonial">Testimonial</option>
            <option value="FAQ">FAQ</option>
            <option value="Footer">Footer</option>
            <option value="Form">Form</option>
            <option value="Article">Article</option>
            <option value="Product">Product</option>
          </select>
        </div>
        <textarea id="create-prompt" class="ai-prompt-input" rows="3"
          placeholder="Describe the component…&#10;e.g. &quot;A pricing card with title, price, feature list, and CTA button&quot;"></textarea>
        <button class="btn-action" id="create-go" style="margin-top:10px"><i class="bi bi-stars"></i> Generate &amp; Insert</button>
      </div>
      <div class="ai-loading" id="create-loading" hidden><div class="spinner"></div><p>Claude is generating…</p></div>
    </div>
  </div>

  <!-- ═══ NEW PAGE MODAL ═══ -->
  <div class="modal-overlay" id="newpage-modal" hidden>
    <div class="modal-box">
      <div class="modal-header">
        <i class="bi bi-file-earmark-plus"></i><span>New Page</span>
        <button class="modal-close" id="newpage-close"><i class="bi bi-x-lg"></i></button>
      </div>
      <div class="modal-body">
        <div class="field-group">
          <label class="field-label">Page Name</label>
          <input type="text" id="newpage-name" class="field-input" placeholder="e.g. about, pricing, blog">
        </div>
        <div class="field-group">
          <label class="field-label">Template</label>
          <select id="newpage-template" class="field-input">
            <option value="Homepage">Homepage</option>
            <option value="LandingPage">Landing Page</option>
            <option value="About">About</option>
            <option value="Services">Services</option>
            <option value="Contact">Contact</option>
            <option value="BlogIndex">Blog Index</option>
            <option value="BlogPost">Blog Post</option>
            <option value="Product">Product Page</option>
            <option value="Pricing">Pricing</option>
            <option value="FAQ">FAQ</option>
            <option value="Privacy">Privacy Policy</option>
            <option value="Terms">Terms of Service</option>
          </select>
        </div>
        <div class="field-group">
          <label class="field-label">Brand Context <span class="text-muted">(optional)</span></label>
          <textarea id="newpage-brand" class="field-input" rows="2" placeholder="e.g. SaaS analytics platform for startups, dark theme, professional tone"></textarea>
        </div>
        <button class="btn-action" id="newpage-go" style="margin-top:10px"><i class="bi bi-stars"></i> Generate Page</button>
        <div style="margin-top:14px;text-align:center;border-top:1px solid var(--bx-border);padding-top:14px">
          <a href="/start.html" style="color:var(--bx-primary);font-size:13px;text-decoration:none"><i class="bi bi-grid-3x3-gap"></i> Or build a full site from an industry template</a>
        </div>
      </div>
      <div class="ai-loading" id="newpage-loading" hidden><div class="spinner"></div><p>Claude is generating your page…</p></div>
    </div>
  </div>

  <!-- ═══ PAGE AUDIT MODAL ═══ -->
  <div class="modal-overlay" id="audit-modal" hidden>
    <div class="modal-box modal-lg">
      <div class="modal-header">
        <i class="bi bi-speedometer2"></i><span>Page Audit</span>
        <button class="modal-close" id="audit-close"><i class="bi bi-x-lg"></i></button>
      </div>
      <div class="modal-body audit-modal-body">
        <div id="audit-loading" class="audit-loading">
          <div class="spinner"></div>
          <p>Analyzing page...</p>
        </div>
        <div id="audit-results" hidden>
          <!-- Score Overview -->
          <div class="audit-overview">
            <div id="audit-score-display">
              <div class="audit-score-ring">
                <svg viewBox="0 0 100 100">
                  <circle cx="50" cy="50" r="45" fill="none" stroke="#e2e8f0" stroke-width="8"/>
                  <circle id="audit-score-circle" cx="50" cy="50" r="45" fill="none" stroke="var(--bx-success)" stroke-width="8" stroke-dasharray="283" stroke-dashoffset="283" stroke-linecap="round" transform="rotate(-90 50 50)"/>
                </svg>
                <div class="audit-score-value" id="audit-score-value">--</div>
              </div>
              <span id="audit-score-delta" class="score-delta"></span>
              <div class="audit-score-label" id="audit-score-label">Analyzing...</div>
              <div id="reaudit-indicator"></div>
            </div>
            <div class="audit-scores-grid" id="audit-scores-grid"></div>
          </div>

          <!-- Top Issues (from detailed analysis) -->
          <div class="audit-issues-section" id="audit-issues-section">
            <div class="audit-section-header"><i class="bi bi-exclamation-triangle"></i> Top Issues</div>
            <div id="audit-top-issues" class="audit-issues-list"></div>
          </div>

          <!-- Quick Wins -->
          <div class="audit-quickwins-section" id="audit-quickwins-section" hidden>
            <div class="audit-section-header"><i class="bi bi-lightning"></i> Quick Wins</div>
            <div id="audit-quick-wins" class="audit-issues-list"></div>
          </div>

          <!-- Detailed Report Dropdown -->
          <details class="audit-details-dropdown" id="audit-details-dropdown">
            <summary class="audit-details-summary">
              <i class="bi bi-file-text"></i> Detailed Report
              <span class="audit-fix-count" id="audit-fix-count">0 items</span>
              <i class="bi bi-chevron-down audit-chevron"></i>
            </summary>
            <div class="audit-details-content">
              <!-- Category tabs -->
              <div class="audit-category-tabs" id="audit-category-tabs">
                <button class="audit-cat-btn active" data-cat="all">All</button>
                <button class="audit-cat-btn" data-cat="meta">Meta</button>
                <button class="audit-cat-btn" data-cat="headings">Headings</button>
                <button class="audit-cat-btn" data-cat="schema">Schema</button>
                <button class="audit-cat-btn" data-cat="semantic">Semantic</button>
                <button class="audit-cat-btn" data-cat="images">Images</button>
                <button class="audit-cat-btn" data-cat="links">Links</button>
                <button class="audit-cat-btn" data-cat="content">Content</button>
              </div>
              <div id="audit-all-fixes" class="audit-fixes-list"></div>
            </div>
          </details>
        </div>
        <div id="audit-error" class="audit-error" hidden>
          <i class="bi bi-exclamation-triangle"></i>
          <p id="audit-error-message">Failed to audit page</p>
        </div>
      </div>
    </div>
  </div>

  <!-- ═══ CREATE COLLECTION MODAL ═══ -->
  <div class="modal-overlay" id="collection-modal" hidden>
    <div class="modal-box">
      <div class="modal-header">
        <i class="bi bi-collection"></i><span>Create Collection</span>
        <button class="modal-close" id="collection-close"><i class="bi bi-x-lg"></i></button>
      </div>
      <div class="modal-body">
        <div class="field-group">
          <label class="field-label">Collection Name</label>
          <input type="text" id="collection-name" class="field-input" placeholder="e.g. Blog Posts, Team Members">
        </div>
        <div class="field-group">
          <label class="field-label">Preset Template</label>
          <select id="collection-preset" class="field-input">
            <option value="blog-posts">Blog Posts</option>
            <option value="products">Products</option>
            <option value="team">Team Members</option>
            <option value="testimonials">Testimonials</option>
            <option value="services">Services</option>
            <option value="faqs">FAQs</option>
            <option value="events">Events</option>
            <option value="portfolio">Portfolio</option>
            <option value="custom">Custom Schema</option>
          </select>
        </div>
        <div class="field-group">
          <label class="field-label">Description <span class="text-muted">(optional)</span></label>
          <textarea id="collection-description" class="field-input" rows="2" placeholder="What is this collection for?"></textarea>
        </div>
        <button class="btn-action" id="collection-go" style="margin-top:10px"><i class="bi bi-plus-lg"></i> Create Collection</button>
      </div>
    </div>
  </div>

  <!-- ═══ COLLECTION ITEMS MODAL ═══ -->
  <div class="modal-overlay" id="collection-items-modal" hidden>
    <div class="modal-box modal-lg">
      <div class="modal-header">
        <i class="bi bi-list-ul"></i><span id="collection-items-title">Collection Items</span>
        <button class="btn-sm" id="btn-add-item"><i class="bi bi-plus-lg"></i> Add Item</button>
        <button class="modal-close" id="collection-items-close"><i class="bi bi-x-lg"></i></button>
      </div>
      <div class="modal-body">
        <div id="collection-items-list" class="collection-items-grid"></div>
      </div>
    </div>
  </div>

  <!-- ═══ EDIT COLLECTION ITEM MODAL ═══ -->
  <div class="modal-overlay" id="item-edit-modal" hidden>
    <div class="modal-box modal-md">
      <div class="modal-header">
        <i class="bi bi-pencil"></i><span id="item-edit-title">Edit Item</span>
        <button class="modal-close" id="item-edit-close"><i class="bi bi-x-lg"></i></button>
      </div>
      <div class="modal-body" id="item-edit-fields"></div>
      <div class="modal-footer">
        <button class="btn-secondary" id="item-cancel">Cancel</button>
        <button class="btn-action" id="item-save"><i class="bi bi-check-lg"></i> Save Item</button>
      </div>
    </div>
  </div>

  <div id="toast-rack"></div>

  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.3/Sortable.min.js"></script>
  <script src="editor.js"></script>
</body>
</html>
